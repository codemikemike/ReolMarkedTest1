<Window x:Class="ReolMarked.MVVM.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Middelby Reolmarked - Reol Administration" 
        Height="900" Width="1400"
        WindowStartupLocation="CenterScreen"
        Background="#F5F5F5">

    <!-- Main Grid Layout -->
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header område -->
        <Border Grid.Row="0" Background="#2E5BBA" Margin="0,0,0,10">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" Orientation="Vertical" Margin="20,15">
                    <TextBlock Text="Middelby Reolmarked" 
                               FontSize="24" 
                               FontWeight="Bold" 
                               Foreground="White"/>
                    <TextBlock Text="Reol Administration System - UC1 &amp; UC2" 
                               FontSize="14" 
                               Foreground="LightBlue"/>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" Margin="20,15">
                    <Button Content="Vis Alle Ledige Reoler" 
                            Command="{Binding ShowAvailableRacksCommand}"
                            Background="#4CAF50" 
                            Foreground="White" 
                            Padding="15,8" 
                            Margin="5,0"
                            BorderThickness="0"/>

                    <Button Content="Kun Reoler Uden Bøjlestang" 
                            Command="{Binding ShowRacksWithoutHangerBarCommand}"
                            Background="#FF9800" 
                            Foreground="White" 
                            Padding="15,8" 
                            Margin="5,0"
                            BorderThickness="0"/>

                    <!-- NYT - UC2 knap -->
                    <Button Content="Vis Nabo-Reoler" 
                            Command="{Binding ShowNeighborRacksCommand}"
                            Background="#9C27B0" 
                            Foreground="White" 
                            Padding="15,8" 
                            Margin="5,0"
                            BorderThickness="0"
                            IsEnabled="{Binding IsCustomerSelected}"/>
                </StackPanel>
            </Grid>
        </Border>

        <!-- Main Content -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="10"/>
                <ColumnDefinition Width="1*"/>
            </Grid.ColumnDefinitions>

            <!-- Venstre side - Reol oversigt -->
            <Border Grid.Column="0" Background="White" BorderBrush="#E0E0E0" BorderThickness="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- Reol liste header -->
                    <Border Grid.Row="0" Background="#F8F9FA" Padding="15,10">
                        <TextBlock Text="Ledige Reoler" 
                                   FontSize="18" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333"/>
                    </Border>

                    <!-- Reol liste -->
                    <ListBox Grid.Row="1" 
                             ItemsSource="{Binding AvailableRacks}"
                             SelectedItem="{Binding SelectedRack}"
                             Background="Transparent"
                             BorderThickness="0"
                             Margin="10">

                        <ListBox.ItemTemplate>
                            <DataTemplate>
                                <Border Background="White" 
                                        BorderBrush="#E0E0E0" 
                                        BorderThickness="1" 
                                        Margin="5" 
                                        Padding="15">

                                    <Border.Style>
                                        <Style TargetType="Border">
                                            <Style.Triggers>
                                                <DataTrigger Binding="{Binding IsSelected, RelativeSource={RelativeSource AncestorType=ListBoxItem}}" Value="True">
                                                    <Setter Property="Background" Value="#E3F2FD"/>
                                                    <Setter Property="BorderBrush" Value="#2196F3"/>
                                                    <Setter Property="BorderThickness" Value="2"/>
                                                </DataTrigger>
                                            </Style.Triggers>
                                        </Style>
                                    </Border.Style>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="Auto"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <!-- Reol nummer (stor) -->
                                        <Border Grid.Column="0" 
                                                Background="#2E5BBA" 
                                                Width="50" 
                                                Height="50" 
                                                VerticalAlignment="Center">
                                            <TextBlock Text="{Binding RackNumber}" 
                                                       FontSize="20" 
                                                       FontWeight="Bold" 
                                                       Foreground="White" 
                                                       HorizontalAlignment="Center" 
                                                       VerticalAlignment="Center"/>
                                        </Border>

                                        <!-- Reol info -->
                                        <StackPanel Grid.Column="1" Margin="15,0,10,0" VerticalAlignment="Center">
                                            <TextBlock Text="{Binding RackType}" 
                                                       FontSize="14" 
                                                       FontWeight="SemiBold" 
                                                       Foreground="#333"/>
                                            <TextBlock Text="{Binding Location}" 
                                                       FontSize="12" 
                                                       Foreground="#666" 
                                                       Margin="0,2,0,0"/>
                                            <TextBlock Text="{Binding Description}" 
                                                       FontSize="11" 
                                                       Foreground="#999" 
                                                       Margin="0,2,0,0"/>
                                        </StackPanel>

                                        <!-- Status -->
                                        <Border Grid.Column="2" 
                                                Background="#4CAF50" 
                                                Padding="8,4" 
                                                VerticalAlignment="Center">
                                            <TextBlock Text="{Binding StatusText}" 
                                                       FontSize="10" 
                                                       FontWeight="Bold" 
                                                       Foreground="White"/>
                                        </Border>
                                    </Grid>
                                </Border>
                            </DataTemplate>
                        </ListBox.ItemTemplate>
                    </ListBox>
                </Grid>
            </Border>

            <!-- Splitter -->
            <GridSplitter Grid.Column="1" 
                          Width="2" 
                          Background="#E0E0E0" 
                          HorizontalAlignment="Stretch"/>

            <!-- Højre side - Kunde håndtering -->
            <Grid Grid.Column="2">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <!-- NYT - Kundens reoler -->
                    <RowDefinition Height="Auto"/>
                    <!-- NYT - Nabo-reoler -->
                    <RowDefinition Height="*"/>
                    <!-- Ny kunde formular -->
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Valgt reol info -->
                <Border Grid.Row="0" 
                        Background="White" 
                        BorderBrush="#E0E0E0" 
                        BorderThickness="1" 
                        Margin="0,0,0,10">

                    <StackPanel Margin="15">
                        <TextBlock Text="Valgt Reol:" 
                                   FontSize="14" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333" 
                                   Margin="0,0,0,5"/>

                        <TextBlock Text="{Binding SelectedRack.RackNumber, StringFormat='Reol nummer: {0}'}" 
                                   FontSize="12" 
                                   Foreground="#666"
                                   Visibility="{Binding IsRackSelected}"/>

                        <TextBlock Text="{Binding SelectedRack.RackType}" 
                                   FontSize="12" 
                                   Foreground="#666"
                                   Visibility="{Binding IsRackSelected}"/>

                        <TextBlock Text="{Binding SelectedRack.Location}" 
                                   FontSize="12" 
                                   Foreground="#666"
                                   Visibility="{Binding IsRackSelected}"/>

                        <TextBlock Text="Ingen reol valgt" 
                                   FontSize="12" 
                                   Foreground="#999"
                                   FontStyle="Italic">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsRackSelected}" Value="False">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- Kunde valg -->
                <Border Grid.Row="1" 
                        Background="White" 
                        BorderBrush="#E0E0E0" 
                        BorderThickness="1" 
                        Margin="0,0,0,10">

                    <StackPanel Margin="15">
                        <TextBlock Text="Vælg Eksisterende Kunde:" 
                                   FontSize="14" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333" 
                                   Margin="0,0,0,5"/>

                        <ComboBox ItemsSource="{Binding Customers}"
                                  SelectedItem="{Binding SelectedCustomer}"
                                  DisplayMemberPath="DisplayText"
                                  Height="30"
                                  Margin="0,5"/>
                    </StackPanel>
                </Border>

                <!-- NYT - UC2: Kundens eksisterende reoler -->
                <Border Grid.Row="2" 
                        Background="White" 
                        BorderBrush="#E0E0E0" 
                        BorderThickness="1" 
                        Margin="0,0,0,10">

                    <StackPanel Margin="15">
                        <TextBlock Text="Kundens Nuværende Reoler:" 
                                   FontSize="14" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333" 
                                   Margin="0,0,0,5"/>

                        <ListBox ItemsSource="{Binding CustomerRacks}"
                                 SelectedItem="{Binding SelectedCustomerRack}"
                                 Height="100"
                                 Background="Transparent"
                                 BorderThickness="0">

                            <ListBox.Style>
                                <Style TargetType="ListBox">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CustomerRacks.Count}" Value="0">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ListBox.Style>

                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="#F0F8FF" 
                                            BorderBrush="#4169E1" 
                                            BorderThickness="1" 
                                            Margin="2" 
                                            Padding="8,4">

                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding RackNumber, StringFormat='Reol {0}'}" 
                                                       FontWeight="SemiBold" 
                                                       FontSize="12"/>
                                            <TextBlock Text="{Binding Location}" 
                                                       FontSize="10" 
                                                       Foreground="#666" 
                                                       Margin="10,0,0,0"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <TextBlock Text="Kunden har ingen reoler endnu" 
                                   FontSize="12" 
                                   Foreground="#999"
                                   FontStyle="Italic">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding CustomerRacks.Count}" Value="0">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- NYT - UC2: Nabo-reoler -->
                <Border Grid.Row="3" 
                        Background="White" 
                        BorderBrush="#E0E0E0" 
                        BorderThickness="1" 
                        Margin="0,0,0,10">

                    <StackPanel Margin="15">
                        <TextBlock Text="Ledige Nabo-Reoler:" 
                                   FontSize="14" 
                                   FontWeight="SemiBold" 
                                   Foreground="#333" 
                                   Margin="0,0,0,5"/>

                        <ListBox ItemsSource="{Binding NeighborRacks}"
                                 Height="80"
                                 Background="Transparent"
                                 BorderThickness="0">

                            <ListBox.Style>
                                <Style TargetType="ListBox">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding NeighborRacks.Count}" Value="0">
                                            <Setter Property="Visibility" Value="Collapsed"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </ListBox.Style>

                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border Background="#E8F5E8" 
                                            BorderBrush="#4CAF50" 
                                            BorderThickness="1" 
                                            Margin="2" 
                                            Padding="8,4">

                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding RackNumber, StringFormat='Reol {0}'}" 
                                                       FontWeight="SemiBold" 
                                                       FontSize="12"/>
                                            <TextBlock Text="LEDIG" 
                                                       FontSize="10" 
                                                       Foreground="#4CAF50" 
                                                       FontWeight="Bold"
                                                       Margin="10,0,0,0"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <TextBlock Text="Ingen nabo-reoler til rådighed" 
                                   FontSize="12" 
                                   Foreground="#999"
                                   FontStyle="Italic">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Visibility" Value="Collapsed"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding NeighborRacks.Count}" Value="0">
                                            <Setter Property="Visibility" Value="Visible"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </StackPanel>
                </Border>

                <!-- Ny kunde formular -->
                <Border Grid.Row="4" 
                        Background="White" 
                        BorderBrush="#E0E0E0" 
                        BorderThickness="1" 
                        Margin="0,0,0,10">

                    <ScrollViewer VerticalScrollBarVisibility="Auto">
                        <StackPanel Margin="15">
                            <TextBlock Text="Opret Ny Kunde:" 
                                       FontSize="14" 
                                       FontWeight="SemiBold" 
                                       Foreground="#333" 
                                       Margin="0,0,0,10"/>

                            <!-- Kunde navn -->
                            <TextBlock Text="Fulde navn:" 
                                       FontSize="12" 
                                       Foreground="#666" 
                                       Margin="0,5,0,2"/>
                            <TextBox Text="{Binding NewCustomerName, UpdateSourceTrigger=PropertyChanged}" 
                                     Height="30" 
                                     Padding="8,5"
                                     BorderBrush="#E0E0E0"/>

                            <!-- Telefon -->
                            <TextBlock Text="Telefonnummer:" 
                                       FontSize="12" 
                                       Foreground="#666" 
                                       Margin="0,10,0,2"/>
                            <TextBox Text="{Binding NewCustomerPhone, UpdateSourceTrigger=PropertyChanged}" 
                                     Height="30" 
                                     Padding="8,5"
                                     BorderBrush="#E0E0E0"/>

                            <!-- Email -->
                            <TextBlock Text="Email:" 
                                       FontSize="12" 
                                       Foreground="#666" 
                                       Margin="0,10,0,2"/>
                            <TextBox Text="{Binding NewCustomerEmail, UpdateSourceTrigger=PropertyChanged}" 
                                     Height="30" 
                                     Padding="8,5"
                                     BorderBrush="#E0E0E0"/>

                            <!-- Adresse -->
                            <TextBlock Text="Adresse:" 
                                       FontSize="12" 
                                       Foreground="#666" 
                                       Margin="0,10,0,2"/>
                            <TextBox Text="{Binding NewCustomerAddress, UpdateSourceTrigger=PropertyChanged}" 
                                     Height="60" 
                                     Padding="8,5"
                                     BorderBrush="#E0E0E0"
                                     TextWrapping="Wrap"
                                     AcceptsReturn="True"
                                     VerticalScrollBarVisibility="Auto"/>

                            <!-- Opret kunde knap -->
                            <Button Content="Opret Kunde" 
                                    Command="{Binding CreateCustomerCommand}"
                                    Background="#4CAF50" 
                                    Foreground="White" 
                                    Height="35" 
                                    Margin="0,15,0,0"
                                    BorderThickness="0" 
                                    FontWeight="SemiBold"/>
                        </StackPanel>
                    </ScrollViewer>
                </Border>

                <!-- Handlingsknapper -->
                <StackPanel Grid.Row="5" Orientation="Vertical">
                    <!-- Opret kontrakt knap -->
                    <Button Content="Opret Reol Lejeaftale" 
                            Command="{Binding CreateContractCommand}"
                            IsEnabled="{Binding CanCreateContract}"
                            Background="#2E5BBA" 
                            Foreground="White" 
                            Height="40" 
                            Margin="0,5"
                            BorderThickness="0" 
                            FontSize="14"
                            FontWeight="SemiBold"/>

                    <!-- Ryd valg knap -->
                    <Button Content="Ryd Valg" 
                            Command="{Binding ClearSelectionCommand}"
                            Background="#F44336" 
                            Foreground="White" 
                            Height="35" 
                            Margin="0,5"
                            BorderThickness="0"/>
                </StackPanel>
            </Grid>
        </Grid>

        <!-- Footer - Status bar -->
        <Border Grid.Row="2" 
                Background="#37474F" 
                Margin="0,10,0,0"
                Padding="15,8">

            <TextBlock Text="{Binding StatusMessage}" 
                       FontSize="12" 
                       Foreground="White" 
                       VerticalAlignment="Center"/>
        </Border>
    </Grid>
</Window>